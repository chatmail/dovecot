From c2a64b7a075d6d96e29b18f7fb11b0bab4e30073 Mon Sep 17 00:00:00 2001
From: Stephan Bosch <stephan.bosch@open-xchange.com>
Date: Fri, 20 Mar 2020 13:35:19 +0100
Subject: [PATCH 16/17] lib-smtp: smtp-address - Don't recognize an address
 with empty localpart as <>.

Depending on context, the addresses <""@domain.tld> and <""> are potentially
valid non-null addresses.
---
 src/lib-smtp/smtp-address.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/src/lib-smtp/smtp-address.h b/src/lib-smtp/smtp-address.h
index 2556e4feab..6d8ccde52d 100644
--- a/src/lib-smtp/smtp-address.h
+++ b/src/lib-smtp/smtp-address.h
@@ -122,8 +122,7 @@ smtp_address_equals(const struct smtp_address *address1,
 static inline bool ATTR_NULL(1) ATTR_PURE
 smtp_address_isnull(const struct smtp_address *address)
 {
-	return (address == NULL || address->localpart == NULL ||
-		*address->localpart == '\0');
+	return (address == NULL || address->localpart == NULL);
 }
 
 #endif
-- 
2.11.0

