From 78c9c50cda5390bc748ed4962763df57650bc95a Mon Sep 17 00:00:00 2001
From: Aki Tuomi <aki.tuomi@dovecot.fi>
Date: Mon, 6 Mar 2017 14:59:46 +0200
Subject: [PATCH] auth: Do not double-expand key in passdb dict when
 authenticating

Broken by 79042f8c
---
 src/auth/db-dict.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/auth/db-dict.c b/src/auth/db-dict.c
index 138ac0dc3..93b5aa268 100644
--- a/src/auth/db-dict.c
+++ b/src/auth/db-dict.c
@@ -408,7 +408,7 @@ static int db_dict_iter_lookup_key_values(struct db_dict_value_iter *iter)
 			continue;
 
 		str_truncate(path, strlen(DICT_PATH_SHARED));
-		var_expand(path, key->key->key, iter->var_expand_table);
+		str_append(path, key->key->key);
 		ret = dict_lookup(iter->conn->dict, iter->pool,
 				  str_c(path), &key->value);
 		if (ret > 0) {
-- 
2.11.0

