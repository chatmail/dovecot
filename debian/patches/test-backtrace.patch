Index: dovecot/src/lib/test-backtrace.c
===================================================================
--- dovecot.orig/src/lib/test-backtrace.c
+++ dovecot/src/lib/test-backtrace.c
@@ -17,8 +17,7 @@ static void test_backtrace_append(void)
 #elif (defined(HAVE_BACKTRACE_SYMBOLS) && defined(HAVE_EXECINFO_H)) || \
       (defined(HAVE_WALKCONTEXT) && defined(HAVE_UCONTEXT_H))
 	test_assert(backtrace_append(bt) == 0);
-	/* it should have some kind of main in it */
-	test_assert(strstr(str_c(bt), "main") != NULL);
+	test_assert(strstr(str_c(bt), "backtrace_append") != NULL);
 #else
 	/* should not work in this context */
 	test_assert(backtrace_append(bt) == -1);
@@ -41,8 +40,7 @@ static void test_backtrace_get(void)
 #elif (defined(HAVE_BACKTRACE_SYMBOLS) && defined(HAVE_EXECINFO_H)) || \
       (defined(HAVE_WALKCONTEXT) && defined(HAVE_UCONTEXT_H))
 	test_assert(backtrace_get(&bt) == 0);
-	/* it should have some kind of main in it */
-	test_assert(strstr(bt, "main") != NULL);
+	test_assert(strstr(bt, "backtrace_append") != NULL);
 #else
 	/* should not work in this context */
 	test_assert(backtrace_get(&bt) == -1);
