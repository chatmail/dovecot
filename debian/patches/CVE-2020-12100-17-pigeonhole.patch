--- a/pigeonhole/src/lib-sieve/plugins/notify/ext-notify-common.c
+++ b/pigeonhole/src/lib-sieve/plugins/notify/ext-notify-common.c
@@ -147,6 +147,7 @@
 (const struct sieve_runtime_env *renv,
 	const char **body_text_r, size_t *body_size_r)
 {
+	const struct message_parser_settings parser_set = { .flags = 0 };
 	const struct sieve_extension *this_ext = renv->oprtn->ext;
 	struct ext_notify_message_context *mctx;
 	struct mail *mail = renv->msgdata->mail;
@@ -181,7 +182,7 @@
 	/* Initialize body decoder */
 	decoder = message_decoder_init(NULL, 0);
 
-	parser = message_parser_init(mctx->pool, input, 0, 0);
+	parser = message_parser_init(mctx->pool, input, &parser_set);
 	is_text = TRUE;
 	save_body = FALSE;
 	while ( (ret=message_parser_parse_next_block(parser, &block)) > 0 ) {
--- a/pigeonhole/src/lib-sieve/sieve-message.c
+++ b/pigeonhole/src/lib-sieve/sieve-message.c
@@ -1159,6 +1159,10 @@
 		MESSAGE_HEADER_PARSER_FLAG_SKIP_INITIAL_LWSP;
 	ARRAY(struct sieve_message_header) headers;
 	struct sieve_message_part *body_part, *header_part, *last_part;
+	const struct message_parser_settings parser_set = {
+		.hdr_flags = hparser_flags,
+		.flags = mparser_flags,
+	};
 	struct message_parser_ctx *parser;
 	struct message_decoder_context *decoder;
 	struct message_block block, decoded;
@@ -1205,7 +1209,7 @@
 		//parser = message_parser_init_from_parts(parts, input,
 		// hparser_flags, mparser_flags);
 	parser = message_parser_init(pool_datastack_create(),
-		input, hparser_flags, mparser_flags);
+		input, &parser_set);
 	while ( (ret=message_parser_parse_next_block
 		(parser, &block)) > 0 ) {
 		struct sieve_message_part **body_part_idx;
