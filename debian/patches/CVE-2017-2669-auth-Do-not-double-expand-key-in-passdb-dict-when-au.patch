From 000030feb7a30f193197f1aab8a7b04a26b42735 Mon Sep 17 00:00:00 2001
From: Aki Tuomi <aki.tuomi@dovecot.fi>
Date: Mon, 6 Mar 2017 14:59:46 +0200
Subject: [PATCH] auth: Do not double-expand key in passdb dict when
 authenticating

Broken by 79042f8c
[carnil: Backport for context in 2.2.13]
---
 src/auth/db-dict.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

--- a/src/auth/db-dict.c
+++ b/src/auth/db-dict.c
@@ -404,7 +404,7 @@ static int db_dict_iter_lookup_key_value
 			continue;
 
 		str_truncate(path, strlen(DICT_PATH_SHARED));
-		var_expand(path, key->key->key, iter->var_expand_table);
+		str_append(path, key->key->key);
 		ret = dict_lookup(iter->conn->dict, iter->pool,
 				  str_c(path), &key->value);
 		if (ret > 0) {
